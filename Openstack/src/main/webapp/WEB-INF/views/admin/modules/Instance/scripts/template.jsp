<%@ page language="java" contentType="text/html; charset=UTF-8"  pageEncoding="UTF-8"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ page trimDirectiveWhitespaces="true" %>
var Template_VmPanel=['<div id="\${id}">','<table isos:item="finder" class="finder">','<thead class="finder-indicator"><th><span class="ui-icon ui-icon-search"></span></th><th>Finder</th></thead>','<form>','<tr>','<td>','<span class="leftLabel">'+'<spring:message code="admin.vm.template.vm.name"/>'+'</span>','<span><input type="text" name="filter_vmname" placeholder="'+'<spring:message code="admin.global.placeholder.enter"/>'+'" /></span>','</td>','<td>','<span class="leftLabel">'+'<spring:message code="admin.vm.template.vm.zone"/>'+'</span>','<span><input type="text" name="filter_vmzone" placeholder="'+'<spring:message code="admin.global.placeholder.enter"/>'+'" /></span>','</td>','<td>','<span class="leftLabel">'+'<spring:message code="admin.vm.template.vm.user"/>'+'</span>','<span><input type="text" name="filter_vmuser" placeholder="'+'<spring:message code="admin.global.placeholder.enter"/>'+'" /></span>','</td>','</tr>','<tr>','<td colspan="3" style="border-top:1px solid #ddd;">','<span class="leftLabel">'+'<spring:message code="admin.vm.template.vm.resetpass"/>'+'</span>','<span>'+'<spring:message code="admin.vm.message.resetpass.tips"/>'+'</span>','</td>','</tr>','<tr>','<td colspan="3">','<span class="leftLabel">'+'<spring:message code="admin.vm.template.vm.clone"/>'+'</span>','<span>'+'<spring:message code="admin.vm.message.clone.tips"/>'+'</span>','</td>','</tr>','</form>','</table>','<table isos:item="vmList" class="vmList">','<thead>','<tr class="headerRow">','<th class="vmName vmRowHeader">'+'<spring:message code="admin.vm.template.vm.name"/>'+'</th>','<th class="vmZone vmRowHeader">'+'<spring:message code="admin.vm.template.vm.zone"/>'+'</th>','<th class="vmUser vmRowHeader">'+'<spring:message code="admin.vm.template.vm.user"/>'+'</th>','<th class="vmStatus vmRowHeader">'+'<spring:message code="admin.vm.template.vm.status"/>'+'</th>','<th class="vmServer vmRowHeader">'+'<spring:message code="admin.vm.template.vm.server"/>'+'</th>','<th class="vmOstype vmRowHeader">'+'<spring:message code="admin.vm.template.vm.ostype"/>'+'</th>','<th class="vmOperation vmRowHeader">'+'<spring:message code="admin.vm.template.vm.operation"/>'+'</th>','</tr>','</thead>','<tbody></tbody>','<tfoot>','<tr class="footerRow">','<td colspan="6" style="text-align:center;"></td>','<td colspan="1"><button onclick="showCreateVM()">'+'<spring:message code="admin.vm.template.vm.create"/>'+'</button><button onclick="loadVm()">'+'<spring:message code="admin.vm.template.vm.refresh"/>'+'</button></td>','</tr>','</tfoot>','</table>','</div>',].join("");var Template_VmRow=['<tr class="vmRow">','<input isos:item="vmId" type="hidden" value="\${vmid}" />','<input isos:item="vmZone" type="hidden" value="\${zone}" />','<input isos:item="vmZonedisplay" type="hidden" value="\${zonedisplay}" />','<input isos:item="vmName" type="hidden" value="\${vmname}" />','<input isos:item="vmUser" type="hidden" value="\${loginuser}" />','<input isos:item="vmAssignedTo" type="hidden" value="\${assignedto}" />','{{if status=="CREATING"}}','<td class="vmRowCell vmName">','<div>\${vmname}</div>','<div class="vice">{{html formatPrivateIps(privateips)}}</div>','</td>','<td class="vmRowCell vmZone">\${zonedisplay}</td>','<td class="vmRowCell vmUser">\${loginuser}</td>','<td class="vmRowCell vmStatus">{{html formatStatus(status, statusdisplay)}}</td>','<td class="vmRowCell vmServer"></td>','<td class="vmRowCell vmOstype">','<div>{{html formatOstype(ostype)}}<div>','</td>','<td class="vmRowCell vmOperation"></td>','{{else}}','<td class="vmRowCell vmName">','<div>\${vmname}</div>','<div class="vice">{{html formatPrivateIps(privateips)}}</div>','</td>','<td class="vmRowCell vmZone">','<div>\${zonedisplay}</div>','<div class="vice" title="{{html formatPublicIps(publicips)}}">{{html formatPublicIps(publicips)}}</div>','</td>','<td class="vmRowCell vmUser">','<div>\${loginuser}</div>','<div class="vice">\${assignedto}</div>','</td>','<td class="vmRowCell vmStatus">{{html formatStatus(status, statusdisplay)}}<div class="vice">{{html formatTaskStatus(taskStatus)}}</div></td>','<td class="vmRowCell vmServer">','<select name="migrateopt" default="\${serverip}" style="width:120px;">','<option value="\${serverip}">\${serverip}</option>','<option value="migrate">'+'<spring:message code="admin.vm.dialog.title.migrate"/>'+'</option>','</select>','</td>','<td class="vmRowCell vmOstype">','<div>{{html formatOstype(ostype)}}</div>','<div class="vice">\${cpus} Core / {{html formatMemory(memory)}}</div>','</td>','<td class="vmRowCell vmOperation">','{{if status=="SHUTOFF"}}','<span><a href="#" onclick="poweron(this);return false;">'+'<spring:message code="admin.vm.template.vm.poweron"/>'+'</a></span>','{{else}}','<span><a href="#" onclick="poweroff(this);return false;">'+'<spring:message code="admin.vm.template.vm.poweroff"/>'+'</a></span>','{{/if}}','<span><a href="#" onclick="resume(this);return false;">'+'<spring:message code="admin.vm.template.vm.resume"/>'+'</a></span>','<span><a href="#" onclick="suspend(this);return false;">'+'<spring:message code="admin.vm.template.vm.pause"/>'+'</a></span>','<span><a href="#" onclick="detail(this);return false;">'+'<spring:message code="admin.vm.template.vm.detail"/>'+'</a></span>','<!-- <span><a href="#" onclick="showCloneDialog(this);return false;">'+'<spring:message code="admin.vm.template.vm.clone"/>'+'</a></span> -->','<!-- <span><a href="#" onclick="resetpass(this);return false;">'+'<spring:message code="admin.vm.template.vm.resetpass"/>'+'</a></span> -->','<span><a href="#" onclick="remove(this);return false;">'+'<spring:message code="admin.vm.template.vm.remove"/>'+'</a></span>','{{if assignedto}}','<!-- <span><a href="#" onclick="unassign(this);return false;">'+'<spring:message code="admin.vm.template.vm.unassign"/>'+'</a></span> -->','{{/if}}','</td>','{{/if}}','</tr>'].join("");var Template_VmDetailPanel=['<div id="\${id}" class="vmDetail">','<table style="width:100%;">','<tbody>','<tr>','<td colspan="2">','<p class="ui-state-default ui-corner-all" style="padding:4px;margin-top:4px;">','<span class="ui-icon ui-icon-power" style="float:left; margin:0 0 0 0;"></span>','<spring:message code="admin.vm.template.info.base"/>','</p>','</td>','</tr>','<tr><td class="detailLeft">'+'<spring:message code="admin.vm.template.info.vmname"/>'+'</td><td name="vmname"></td></tr>','<tr><td class="detailLeft">'+'<spring:message code="admin.vm.template.info.vmzone"/>'+'</td><td name="zonedisplay"></td></tr>','<tr><td class="detailLeft">'+'<spring:message code="admin.vm.template.info.vmostype"/>'+'</td><td name="ostype"></td></tr>','<tr>','<td class="detailLeft">'+'<spring:message code="admin.vm.template.info.vmcpu"/>'+'</td>','<td style="text-align:center;">','<table style="width:100%;">','<tr>','<td style="width:100px;text-align:left;">'+'<spring:message code="admin.vm.template.info.now"/>'+': <span name="cpus"></span></td>','<td><div class="slider" name="slider_cpu"></div></td>','<td style="width:100px;text-align:left;">'+'<spring:message code="admin.vm.template.info.max"/>'+': <span name="maxcpus"></span></td>','<td style="width:60px;"><button onclick="applyCpu(this)">'+'<spring:message code="admin.vm.template.info.apply"/>'+'</button></td>','</tr>','</table>','</td>','</tr>','<tr>','<td class="detailLeft">'+'<spring:message code="admin.vm.template.info.vmmem"/>'+'</td>','<td style="text-align:center;">','<table style="width:100%;">','<tr>','<td style="width:100px;text-align:left;">'+'<spring:message code="admin.vm.template.info.now"/>'+': <span name="memory"></span></td>','<td><div class="slider" name="slider_mem"></div></td>','<td style="width:100px;text-align:left;">'+'<spring:message code="admin.vm.template.info.max"/>'+': <span name="maxmemory"></span></td>','<td style="width:60px;"><button onclick="applyMem(this)">'+'<spring:message code="admin.vm.template.info.apply"/>'+'</button></td>','</tr>','</table>','</td>','</tr>','<tr><td class="detailLeft">'+'<spring:message code="admin.vm.template.info.created"/>'+'</td><td name="starttime"></td></tr>','<tr><td class="detailLeft">'+'<spring:message code="admin.vm.template.info.update"/>'+'</td><td name="updatetime"></td></tr>','<tr><td class="detailLeft">'+'<spring:message code="admin.vm.template.info.disk"/>'+'</td><td name="disksize"></td></tr>','<tr>','<td class="detailLeft">'+'<spring:message code="admin.vm.template.info.status"/>'+'</td>','<td><span name="statusicon" style="float:left; margin:0 0 0 0;"></span><span name="statusdisplay"></span></td>','</tr>','<tr>','<td colspan="2">','<p class="ui-state-default ui-corner-all" style="padding:4px;margin-top:4px;">','<span class="ui-icon ui-icon-signal" style="float:left; margin:0 0 0 0;"></span>','<spring:message code="admin.vm.template.info.network"/>','</p>','</td>','</tr>','<tr><td class="detailLeft">'+'<spring:message code="admin.vm.template.info.publicip"/>'+'</td><td name="publicips"></td></tr>','<tr><td class="detailLeft">'+'<spring:message code="admin.vm.template.info.privateip"/>'+'</td><td name="privateips"></td></tr>','<tr>','<td class="detailLeft">'+'<spring:message code="admin.vm.template.info.vnc.label"/>'+'</td>','<td name="accesspoint">','<a name="javavnc" target="_blank" href="#" style="color:#ff6f10;margin-right:10px;">','<span class="ui-icon ui-icon-extlink" style="float:left; margin:0 0 0 0;"></span>','<spring:message code="admin.vm.template.info.vnc.access"/>'.sprintf("VNC"),'</a>','<a name="webvnc" target="_blank" href="#" style="color:#ff6f10;">','<spring:message code="admin.vm.template.info.vnc.access"/>'.sprintf("Web"),'</a>','</td>','</tr>','<tr>','<td class="detailLeft">'+'<spring:message code="admin.vm.template.info.label.vmpasswd"/>'+'</td>','<td name="vmpasswd">','<a onclick="showVmPasswd(this);return false;" href="#" style="color:#ff6f10;">','<span class="ui-icon ui-icon-locked" style="float:left; margin:0 0 0 0;"></span>','<spring:message code="admin.vm.template.info.link.getvmpasswd"/>','</a>','</td>','</tr>','<tr>','<td colspan="2">','<p class="ui-state-default ui-corner-all" style="padding:4px;margin-top:4px;">','<span class="ui-icon ui-icon-newwin" style="float:left; margin:0 0 0 0;"></span>','<spring:message code="admin.vm.template.info.graph"/>','</p>','</td>','</tr>','<tr>','<td style="text-align:center;" colspan="2">','<span class="chartIcon" onclick="showChart(this, \'cpu\');">','<span class="chartThumb chartThumbCPU"></span>','<span class="chartLabel">'+'<spring:message code="admin.vm.chart.icon.cpu"/>'+'</span>','</span>','<span class="chartIcon" onclick="showChart(this, \'mem\');">','<span class="chartThumb chartThumbMEM"></span>','<span class="chartLabel">'+'<spring:message code="admin.vm.chart.icon.mem"/>'+'</span>','</span>','<span class="chartIcon" onclick="showChart(this, \'net\');">','<span class="chartThumb chartThumbNET"></span>','<span class="chartLabel">'+'<spring:message code="admin.vm.chart.icon.net"/>'+'</span>','</span>','<span class="chartIcon" onclick="showChart(this, \'vol\');">','<span class="chartThumb chartThumbVOL"></span>','<span class="chartLabel">'+'<spring:message code="admin.vm.chart.icon.vol"/>'+'</span>','</span>','</td>','</tr>','</tbody>','</table>','</div>',].join("");var Template_MigratePanel=['<div id="\${id}" title="'+'<spring:message code="admin.vm.dialog.title.migrate"/>'+'">','<div style="text-align:center;background:none;">','<span>'+'<spring:message code="admin.vm.template.info.migrate.server"/>'+'</span>','<select name="targetServer"></select>','</div>','</div>'].join("");var Template_ClonePanel=['<div id="\${id}" title="'+'<spring:message code="admin.vm.dialog.title.clone"/>'+'" class="clonePanel" >','<div style="text-align:center;background:none;">','<table>','<tbody>','<tr class="vmtemp"><td class="label">'+'<spring:message code="admin.vm.template.clone.vmtemp"/>'+'</td><td class="value"></td></tr>','<tr class="vmuser"><td class="label">'+'<spring:message code="admin.vm.template.clone.vmuser"/>'+'</td><td class="value"></td></tr>','<tr class="vmname">','<td class="label">'+'<spring:message code="admin.vm.template.clone.vmname"/>'+'</td>','<td class="value"><input placeholder="'+'<spring:message code="admin.vm.template.clone.vmname.placeholder"/>'+'" class="inputVmname" maxlength="<!--#echo var="MaxLength_Instance"-->" /></td>','</tr>','<tr class="vmzone"><td class="label">'+'<spring:message code="admin.vm.template.clone.vmzone"/>'+'</td><td class="value"></td></tr>','<tr class="vmcpu"><td class="label">'+'<spring:message code="admin.vm.template.clone.vmcpu"/>'+'</td><td class="value"></td></tr>','<tr class="vmmem"><td class="label">'+'<spring:message code="admin.vm.template.clone.vmmem"/>'+'</td><td class="value"></td></tr>','<tr class="vmsoft"><td class="label">'+'<spring:message code="admin.vm.template.clone.vmsoft"/>'+'</td><td class="value"></td></tr>','<tr class="vmplan"><td class="label">'+'<spring:message code="admin.vm.template.clone.vmplan"/>'+'</td><td class="value"></td></tr>','<tr class="vmprice"><td class="label">'+'<spring:message code="admin.vm.template.clone.vmprice"/>'+'</td><td class="value red"></td></tr>','<tr><td colspan="2" style="text-align:center;"><span class="vice">'+'<spring:message code="admin.vm.template.clone.vmprice.tips"/>'+'</span></td></tr>','</tbody>','</table>','</div>','</div>'].join("");var Template_ChartPanel=['<div title="\${vmname}">','<div style="font-size:12px;">','<span>'+'<spring:message code="admin.vm.chart.label.choose.duration"/>'+'</span>','<select name="duration">','<option value="7200000" selected>'+'<spring:message code="admin.vm.chart.option.last2hours"/>'+'</option>','<option value="86400000">'+'<spring:message code="admin.vm.chart.option.last1day"/>'+'</option>','<option value="604800000">'+'<spring:message code="admin.vm.chart.option.last1week"/>'+'</option>','<option value="2592000000">'+'<spring:message code="admin.vm.chart.option.last1month"/>'+'</option>','<option value="7776000000">'+'<spring:message code="admin.vm.chart.option.last3month"/>'+'</option>','</select>','<span>'+'<spring:message code="admin.vm.chart.label.choose.interval"/>'+'</span>','<select name="interval">','</select>','<button name="reloadChart">'+'<spring:message code="admin.vm.template.vm.refresh"/>'+'</button>','</div>','<span class="splitter"></span>','<span id="\${chartid}" style="width:780px;height:400px;margin:0 auto;"></span>','<div style="font-size:11px;color:#ff4444;">'+'<spring:message code="admin.vm.chart.label.notice"/>'+'</div>','</div>'].join("");var Template_MessageBox=['<div title="'+'<spring:message code="admin.vm.dialog.title.tips"/>'+'">','<p class="message">{{html message}}</p>','</div>'].join("");
var Template_CreateVMImageItem = '\
    <div id="\${id}" style="font-size:12px;">\
        <span class="dialogLine">\
            <span class="dialogLineLeft"><spring:message code="admin.instance.label.name"/>:</span>\
            <span class="dialogLineRight">\
                <input isos:item="vmname" type="text" value=""/>\
            </span>\
        </span>\
        <span class="dialogLine">\
            <span class="dialogLineLeft"><spring:message code="admin.vmimage.label.imgname"/>:</span>\
            <span class="dialogLineRight typeSelect">\
                <select id="selImageModel" isos:item="selImageModel" style="width:140px;height:24px">\
                    <option value="-1" selected><spring:message code="admin.vm.image.choose"/></option>\
                    <c:forEach items="${imgModels}" var="img">\
                        <option value="${img.imgId}" selected>${img.imgName}</option>\
                    </c:forEach>\
                </select>\
           </span>\
        </span>\
        <span class="dialogLine">\
            <span class="dialogLineLeft"><spring:message code="admin.vmimage.label.flavorname"/>:</span>\
            <span class="dialogLineRight typeSelect">\
                <select id="selFlavorModel" isos:item="selFlavorModel" style="width:140px;height:24px">\
                     <option value="-1" selected><spring:message code="admin.vm.flavor.choose"/></option>\
                    <c:forEach items="${flavorModels}" var="flavor">\
                        <option value="${flavor.flavorId}" >${flavor.flavorName}</option>\
                    </c:forEach>\
                </select>\
            </span>\
         </span>\
    </div>';